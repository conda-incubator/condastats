<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Try condastats in your browser</title>
        <!-- Theme CSS from conda-sphinx-theme / pydata-sphinx-theme -->
        <link
            rel="stylesheet"
            href="../_static/styles/pydata-sphinx-theme.css"
        />
        <link rel="stylesheet" href="../_static/css/style.css" />
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
        <link
            href="https://cdn.jsdelivr.net/npm/jquery.terminal@2.45.2/css/jquery.terminal.min.css"
            rel="stylesheet"
        />
        <script src="https://cdn.jsdelivr.net/npm/jquery.terminal@2.45.2/js/jquery.terminal.min.js"></script>
        <!-- Prism.js for REPL syntax highlighting -->
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
        <link
            href="https://cdn.jsdelivr.net/npm/terminal-prism/css/prism-dark.css"
            rel="stylesheet"
        />
        <script src="https://cdn.jsdelivr.net/npm/jquery.terminal@2.45.2/js/prism.js"></script>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <script>
            if (new URLSearchParams(location.search).has("embed"))
                document.body.classList.add("embed-mode");
        </script>
        <div class="container">
            <header>
                <h1><span>condastats</span> &mdash; Try in your browser</h1>
                <p>
                    Query conda package download statistics with Python running
                    entirely in your browser via Pyodide.
                </p>
            </header>

            <!-- Consent overlay â€“ shown until user opts in -->
            <div id="consent-overlay">
                <p>
                    This demo downloads <strong>Pyodide</strong> (~20 MB) to run
                    Python in your browser, then fetches package data
                    (1&ndash;15 MB per month) from GitHub Pages.
                </p>
                <button id="consent-btn">Start interactive demo</button>
            </div>

            <div id="app-content" style="display: none">
                <!-- Quick-start examples -->
                <div class="examples" id="examples">
                    <div class="example-card" data-type="top">
                        <strong>Top 20 packages</strong>
                        <span>Most downloaded this period</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="numpy, scipy, pandas"
                        data-type="overall"
                    >
                        <strong>Scientific Python</strong>
                        <span>numpy vs scipy vs pandas</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="pytorch, tensorflow, transformers"
                        data-type="overall"
                    >
                        <strong>AI / ML frameworks</strong>
                        <span>PyTorch vs TensorFlow vs Transformers</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="python"
                        data-type="pkg_version"
                    >
                        <strong>Python versions</strong>
                        <span>Which CPython versions are popular?</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="flask, django, fastapi"
                        data-type="overall"
                    >
                        <strong>Web frameworks</strong>
                        <span>Flask vs Django vs FastAPI</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="matplotlib, plotly, seaborn"
                        data-type="overall"
                    >
                        <strong>Visualization</strong>
                        <span>matplotlib vs plotly vs seaborn</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="numpy"
                        data-type="pkg_platform"
                    >
                        <strong>Platform breakdown</strong>
                        <span>numpy across linux / osx / win</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="pytorch"
                        data-type="data_source"
                    >
                        <strong>PyTorch by channel</strong>
                        <span>anaconda vs conda-forge</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="polars, dask, python-duckdb"
                        data-type="overall"
                    >
                        <strong>Dataframe challengers</strong>
                        <span>polars vs dask vs DuckDB</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="jupyterlab, notebook"
                        data-type="overall"
                    >
                        <strong>Jupyter showdown</strong>
                        <span>JupyterLab vs classic Notebook</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="scikit-learn"
                        data-type="pkg_python"
                    >
                        <strong>scikit-learn by Python</strong>
                        <span>Which Python versions use sklearn?</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="conda, mamba, pixi"
                        data-type="overall"
                    >
                        <strong>Package managers</strong>
                        <span>conda vs mamba vs pixi</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="ruff, flake8, black"
                        data-type="overall"
                    >
                        <strong>Linting evolution</strong>
                        <span>Rust-powered ruff vs the old guard</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="requests, httpx, aiohttp"
                        data-type="overall"
                    >
                        <strong>HTTP clients</strong>
                        <span>requests vs httpx vs aiohttp</span>
                    </div>
                    <div
                        class="example-card"
                        data-pkg="pyarrow"
                        data-type="pkg_platform"
                    >
                        <strong>Arrow by platform</strong>
                        <span>PyArrow across linux / osx / win</span>
                    </div>
                </div>

                <!-- Form -->
                <div class="form-section">
                    <div class="form-row three">
                        <div class="form-group">
                            <label for="package"
                                >Package(s)
                                <small
                                    style="
                                        text-transform: none;
                                        font-weight: 400;
                                    "
                                    >&mdash; comma-separated</small
                                ></label
                            >
                            <input
                                type="text"
                                id="package"
                                list="pkg-suggestions"
                                value="pandas"
                                placeholder="e.g. pandas, numpy"
                                autocomplete="off"
                            />
                            <datalist id="pkg-suggestions"></datalist>
                        </div>
                        <div class="form-group">
                            <label for="month-start">From</label>
                            <input type="month" id="month-start" />
                        </div>
                        <div class="form-group">
                            <label for="month-end">To</label>
                            <input type="month" id="month-end" />
                        </div>
                    </div>
                    <div
                        class="form-row"
                        style="grid-template-columns: 1fr auto"
                    >
                        <div class="form-group">
                            <label for="query-type">Group by</label>
                            <select id="query-type">
                                <option value="overall">Overall</option>
                                <option value="pkg_platform">Platform</option>
                                <option value="data_source">Data source</option>
                                <option value="pkg_version">Pkg version</option>
                                <option value="pkg_python">
                                    Python version
                                </option>
                                <option value="top">Top packages</option>
                            </select>
                        </div>
                        <div class="form-group range-presets">
                            <label>Quick range</label>
                            <div class="preset-btns">
                                <button
                                    class="preset-btn"
                                    data-range="1"
                                    title="Single month"
                                >
                                    1 month
                                </button>
                                <button
                                    class="preset-btn"
                                    data-range="3"
                                    title="Last 3 months"
                                >
                                    3 months
                                </button>
                                <button
                                    class="preset-btn"
                                    data-range="6"
                                    title="Last 6 months"
                                >
                                    6 months
                                </button>
                                <button
                                    class="preset-btn active"
                                    data-range="12"
                                    title="Last 12 months"
                                >
                                    1 year
                                </button>
                                <button
                                    class="preset-btn"
                                    data-range="24"
                                    title="Last 2 years"
                                >
                                    2 years
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="btn-row">
                        <button id="run-btn" disabled>
                            <span class="btn-spinner"></span>Loading
                            Pyodide&hellip;
                        </button>
                        <button
                            id="share-btn"
                            type="button"
                            title="Copy shareable link for this query"
                            style="
                                flex: none;
                                background: var(--pst-color-surface);
                                color: var(--pst-color-text-base);
                                border: 1px solid var(--pst-color-border);
                            "
                        >
                            &#128279; Copy link
                        </button>
                    </div>
                    <p class="note">
                        Each month downloads 1&ndash;15&nbsp;MB. Already-fetched
                        months are cached and reused instantly.
                    </p>
                </div>

                <!-- Python REPL -->
                <div id="repl-section">
                    <button id="repl-toggle" type="button">
                        <span class="arrow">&#9654;</span> Python REPL
                        <span
                            style="
                                font-weight: 400;
                                color: var(--pst-color-text-muted);
                                font-size: 0.8rem;
                            "
                            >&mdash; explore the loaded data with
                            condastats</span
                        >
                    </button>
                    <div id="repl-body">
                        <div id="repl-terminal"></div>
                        <div class="repl-hint">
                            Tab to autocomplete &bull; Up/Down for history
                            &bull; Ctrl+C to interrupt
                        </div>
                    </div>
                </div>

                <!-- Results -->
                <div id="results">
                    <h2 id="results-title"></h2>
                    <div id="hero-stat" class="hero-stat" style="display: none">
                        <div class="number" id="hero-number"></div>
                        <div class="label" id="hero-label"></div>
                    </div>
                    <div
                        id="summary-cards"
                        class="summary-cards"
                        style="display: none"
                    ></div>
                    <div
                        id="chart-container"
                        class="chart-wrap"
                        style="display: none"
                    >
                        <canvas id="result-chart"></canvas>
                    </div>
                    <div id="results-content" class="table-wrap"></div>
                </div>
            </div>
            <!-- /app-content -->

            <footer>
                Powered by
                <a
                    href="https://github.com/conda-incubator/condastats"
                    target="_blank"
                    rel="noopener"
                    >condastats</a
                >,
                <a href="https://pyodide.org/" target="_blank" rel="noopener"
                    >Pyodide</a
                >,
                <a
                    href="https://pandas.pydata.org/"
                    target="_blank"
                    rel="noopener"
                    >pandas</a
                >,
                <a
                    href="https://github.com/dask/fastparquet"
                    target="_blank"
                    rel="noopener"
                    >fastparquet</a
                >
                &amp;
                <a
                    href="https://www.chartjs.org/"
                    target="_blank"
                    rel="noopener"
                    >Chart.js</a
                >. Data from the
                <a
                    href="https://github.com/anaconda/anaconda-package-data"
                    target="_blank"
                    rel="noopener"
                    >Anaconda public dataset</a
                >.
                <br />
                <a href="../">&larr; Back to condastats documentation</a>
                &middot;
                <a
                    href="https://github.com/conda-incubator/condastats"
                    target="_blank"
                    rel="noopener"
                    >GitHub</a
                >
            </footer>
        </div>

        <script src="app.js"></script>
    </body>
</html>
